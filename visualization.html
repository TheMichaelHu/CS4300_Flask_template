<!DOCTYPE html>
<html>
	
	<head>
		<title> Visualization </title>
		
			<link href="https://fonts.googleapis.com/css?family=Barlow+Condensed" rel="stylesheet">
			<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
			<script src="https://d3js.org/d3.v4.min.js"></script>
			<script src="http://d3js.org/topojson.v2.min.js"></script>
			<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
		
				
			<style>

				body { font-size: 8; }
                /* .hist { border: solid black 2px; } */
				
			</style>

			
	</head>
	
	<body>
        
        <div id = "viz">
        
        
        </div>
		
		<script>
            
				
            var tag = "#viz";
            var json = { 
                        "distribution_metadata": { 
                            "gender_dist": {
                                "by_movie": [["Male", 0.02], ["Female", 0.39], ["Dubious", 0.59]], 
                                "by_line": [["Male", 0.22], ["Female", 0.16], ["Dubious", 0.61]] 
                            }
                        }
                      };
            
            var jsonData = json["distribution_metadata"]["gender_dist"]["by_movie"];
            var jsonData2 = json["distribution_metadata"]["gender_dist"]["by_line"];
            
            var svgWidth = 400;
            var svgHeight = 300;
            	
			var svg = d3.select(tag)
			.append("svg")
			.attr("width", svgWidth)
			.attr("height", svgHeight)
			.attr("class", "bar");
				
			var maxOffset = 0.9 * svgHeight;
                        
			// scale
			var yScale = d3.scaleLinear()
			.domain([0, 1])
            // percentage between 0 and 1
			.range([0, maxOffset]);
            
            var yMax = d3.max(jsonData, function (d, i) { return d[1]; });
                        
            var pushX = 120;
            var pushY = 60;
            
            var interBarSpace = 60;
            var barWidth = 20;
				
			// data join
			var bars = svg.selectAll("rect")
			.data(jsonData)
			.enter();
            
			bars.append("rect")
			.attr("width", barWidth)
			.attr("height", function(d, i) { return yScale(jsonData[i][1]); })
			.attr("x", function (d, i) { return pushX + interBarSpace * i; })
			.attr("y", function (d, i) { return pushY + yScale(yMax) - yScale(jsonData[i][1]); })
			.attr("fill", "orange")
            
            
            // ---------------------------------------------------------------- //
            
            var yMax2 = d3.max(jsonData2, function (d, i) { return d[1]; });

            var pushX = 120 + barWidth;
            var pushY = 55;
            
			// data join
            bars
			.append("rect")
			.attr("width", barWidth)
			.attr("height", function(d, i) { return yScale(jsonData2[i][1]); })
			.attr("x", function (d, i) { return pushX + interBarSpace * i; })
			.attr("y", function (d, i) { return pushY + yScale(yMax2) - yScale(jsonData2[i][1]); })
			.attr("fill", "red");
        
            legend = svg.append("g")
            .attr("class","legend")
            .attr("transform","translate(50,30)")
            .style("font-size","12px")
            
	
		</script>
		
		<br> <br>

	</body>
	
</html>